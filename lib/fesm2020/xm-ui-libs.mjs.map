{"version":3,"file":"xm-ui-libs.mjs","sources":["../../projects/xm-ui-libs/src/components/test-ui/test.component.ts","../../projects/xm-ui-libs/src/components/test-ui/test-ui.module.ts","../../projects/xm-ui-libs/src/directives/icon/icon.directive.ts","../../projects/xm-ui-libs/src/components/rate/rate-item/rate-item.component.ts","../../projects/xm-ui-libs/src/components/rate/rate-item/rate-item.component.html","../../projects/xm-ui-libs/src/components/rate/rate.component.ts","../../projects/xm-ui-libs/src/components/rate/rate.component.html","../../projects/xm-ui-libs/src/directives/xm-btn.directive.ts","../../projects/xm-ui-libs/src/directives/str-tpl-outlet.directive.ts","../../projects/xm-ui-libs/src/directives/index.ts","../../projects/xm-ui-libs/src/components/rate/rate.module.ts","../../projects/xm-ui-libs/src/index.ts","../../projects/xm-ui-libs/src/xm-ui-libs.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'xm-test',\n  template: `\n    <p>\n      xm-ui-libs test works !!!!!\n    </p>\n  `,\n  styles: [\n  ]\n})\nexport class TestComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { TestComponent } from './test.component';\n\n\n\n@NgModule({\n  declarations: [\n    TestComponent\n  ],\n  imports: [\n  ],\n  exports: [\n    TestComponent\n  ]\n})\nexport class TestUiModule { }\n","import {Directive, ElementRef, Input, OnChanges, Renderer2, SimpleChanges} from '@angular/core';\nimport {IconType} from './type';\nimport {TypeWithUndefined} from \"../../utils\";\n\n@Directive({\n  selector: 'i[xmIcon]',\n  host: {\n    '[class.iconfont]': 'true'\n  }\n})\nexport class IconDirective implements OnChanges {\n  // @HostBinding('class.iconfont') readonly hostCls = true;\n  @Input('xmIcon') type: TypeWithUndefined<IconType>;\n  constructor(private el: ElementRef, private rd2: Renderer2) {}\n\n  ngOnChanges(changes: SimpleChanges): void {\n    const { type } = changes;\n    // console.log('type change', type);\n    if (type.previousValue) {\n      this.rd2.removeClass(this.el.nativeElement, 'icon-' + type.previousValue);\n    }\n    this.rd2.addClass(this.el.nativeElement, 'icon-' + type.currentValue);\n  }\n}\n","import {Component, OnInit, ChangeDetectionStrategy, Output, EventEmitter, Input, TemplateRef} from '@angular/core';\nimport {TypeWithUndefined} from \"../../../utils\";\n\n@Component({\n  selector: 'xm-rate-item',\n  templateUrl: './rate-item.component.html',\n  styleUrls: ['./rate-item.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class RateItemComponent implements OnInit {\n  @Input() tpl: TypeWithUndefined<TemplateRef<void>>;\n  @Input() rateItemCls = 'xm-rate-item';\n  @Output() private itemHover = new EventEmitter<boolean>();\n  @Output() private itemClick = new EventEmitter<boolean>();\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n  hoverRate(isHalf: boolean): void {\n    this.itemHover.emit(isHalf);\n  }\n\n  clickRate(isHalf: boolean): void {\n    this.itemClick.emit(isHalf);\n  }\n}\n","<div [class]=\"rateItemCls || 'xm-rate-item'\">\n  <div class=\"star-wrap back\" (click)=\"clickRate(false)\" (mouseenter)=\"hoverRate(false)\">\n    <ng-template [ngTemplateOutlet]=\"tpl || defaultTpl\"></ng-template>\n  </div>\n  <div class=\"star-wrap front\" (click)=\"clickRate(true)\" (mouseenter)=\"hoverRate(true)\">\n    <ng-template [ngTemplateOutlet]=\"tpl || defaultTpl\"></ng-template>\n  </div>\n  <ng-template #defaultTpl>\n    <i class=\"icon\" xmIcon=\"Star\"></i>\n  </ng-template>\n</div>\n","import {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  EventEmitter,\n  forwardRef,\n  Input,\n  OnInit,\n  Output, TemplateRef,\n  ViewEncapsulation\n} from '@angular/core';\nimport {ControlValueAccessor, NG_VALUE_ACCESSOR} from '@angular/forms';\nimport {TypeWithUndefined} from \"../../utils\";\n\n@Component({\n  selector: 'xm-rate',\n  templateUrl: './rate.component.html',\n  styleUrls: ['./rate.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  encapsulation: ViewEncapsulation.None,\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => RateComponent),\n      multi: true\n    }\n  ]\n})\nexport class RateComponent implements OnInit, ControlValueAccessor {\n  @Input() count = 5;\n  @Input() tpl: TypeWithUndefined<TemplateRef<void>>;\n  private readonly  = false;\n  starArray: number[] = [];\n  private hoverValue = 0;\n  private actualValue = 0;\n  private hasHalf = false;\n  rateItemStyles: string[] = [];\n  @Output() changed = new EventEmitter<number>();\n  constructor(private cdr: ChangeDetectorRef) { }\n\n  ngOnInit(): void {\n    this.updateStarArray();\n  }\n\n  rateHover(isHalf: boolean, index: number): void {\n    if (this.readonly || (this.hoverValue === index + 1 && isHalf === this.hasHalf)) {\n      return;\n    }\n    this.hoverValue = index + 1;\n    this.hasHalf = isHalf;\n    // console.log('hoverValue', this.hoverValue);\n    this.updateStarStyle();\n  }\n\n  rateClick(isHalf: boolean, index: number): void {\n    if (this.readonly) {\n      return;\n    }\n    this.hoverValue = index + 1;\n    this.hasHalf = isHalf;\n    this.setActualValue(isHalf ? index + 0.5 : this.hoverValue);\n    this.updateStarStyle();\n  }\n\n  private setActualValue(value: number): void {\n    if (this.actualValue !== value) {\n      this.actualValue = value;\n      this.onChange(value);\n      this.changed.emit(value);\n    }\n  }\n  rateLeave(): void {\n    this.hasHalf = !Number.isInteger(this.actualValue);\n    this.hoverValue = Math.ceil(this.actualValue);\n    this.updateStarStyle();\n  }\n\n  private updateStarArray(): void {\n    this.starArray = Array(this.count).fill(0).map((item, index) => index);\n    // console.log('starArray', this.starArray);\n  }\n\n  private updateStarStyle(): void {\n    this.rateItemStyles = this.starArray.map(index => {\n      const base = 'xm-rate-item';\n      const value = index + 1;\n      let cls = '';\n      if (value < this.hoverValue || (!this.hasHalf && value === this.hoverValue)) {\n        cls += base + '-full';\n      } else if (this.hasHalf && value === this.hoverValue) {\n        cls += base + '-half';\n      }\n      const midCls = this.readonly ? ' xm-rate-item-readonly ' : ' ';\n      return base + midCls + cls;\n    });\n  }\n\n  onChange: (value: number) => void = () => {};\n  onTouched: () => void = () => {};\n  writeValue(value: number): void {\n    // console.log('writeValue', value);\n    if (value) {\n      this.actualValue = value;\n      this.rateLeave();\n      this.cdr.markForCheck();\n    }\n  }\n  registerOnChange(fn: (value: number) => void): void {\n    this.onChange = fn;\n  }\n  registerOnTouched(fn: () => void): void {\n    this.onTouched = fn;\n  }\n  setDisabledState(isDisabled: boolean): void {\n    this.readonly = isDisabled;\n  }\n}\n","<div class=\"xm-rate-wrap\" (mouseleave)=\"rateLeave()\">\n  <xm-rate-item\n    *ngFor=\"let item of starArray; index as i\"\n    [tpl]=\"tpl\"\n    [rateItemCls]=\"rateItemStyles[i]\"\n    (itemClick)=\"rateClick($event, i)\"\n    (itemHover)=\"rateHover($event, i)\">\n  </xm-rate-item>\n</div>\n","import {Directive, HostBinding, Input} from '@angular/core';\r\n\r\n@Directive({\r\n  selector: 'a[xmBtn], button[xmBtn]',\r\n  host: {\r\n    '[class.xm-btn]': 'true'\r\n  }\r\n})\r\nexport class BtnDirective {\r\n  @Input() @HostBinding('class.xm-btn-block') xmBlock = false;\r\n  @Input() @HostBinding('class.xm-btn-circle') xmCircle = false;\r\n  constructor() { }\r\n\r\n}\r\n","import {Directive, Input, OnChanges, SimpleChanges, TemplateRef, ViewContainerRef} from '@angular/core';\r\nimport {TypeWithUndefined} from \"../utils\";\r\n\r\n@Directive({\r\n  selector: '[xmStrTplOutlet]'\r\n})\r\nexport class StrTplOutletDirective<T> implements OnChanges {\r\n  @Input() xmStrTplOutlet: TemplateRef<T> | string = '';\r\n  @Input() xmStrTplOutletContext: TypeWithUndefined<T>;\r\n  constructor(private viewContainer: ViewContainerRef, private templateRef: TemplateRef<T>) { }\r\n  ngOnChanges({ xmStrTplOutlet }: SimpleChanges) {\r\n    if (xmStrTplOutlet) {\r\n      this.viewContainer.clear();\r\n      const template = (this.xmStrTplOutlet instanceof TemplateRef) ? this.xmStrTplOutlet : this.templateRef;\r\n      this.viewContainer.createEmbeddedView(template, this.xmStrTplOutletContext);\r\n    }\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\nimport { IconDirective } from './icon/icon.directive';\nimport {BtnDirective} from \"./xm-btn.directive\";\nimport {StrTplOutletDirective} from \"./str-tpl-outlet.directive\";\n\nconst list = [IconDirective, BtnDirective, StrTplOutletDirective];\n\n@NgModule({\n  declarations: list,\n  exports: list\n})\nclass DirectivesModule { }\n\nexport { IconDirective, BtnDirective, StrTplOutletDirective, DirectivesModule }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport {RateItemComponent} from './rate-item/rate-item.component';\nimport {DirectivesModule} from '../../directives';\nimport { RateComponent } from './rate.component';\n\n\n\n@NgModule({\n  declarations: [RateItemComponent, RateComponent],\n  imports: [\n    CommonModule,\n    DirectivesModule\n  ],\n  exports: [RateComponent]\n})\nexport class RateModule { }\n","/*\n * 库的入口文件\n */\n\nexport * from './components/test-ui';\nexport * from './components/rate';\nexport * from './directives';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}